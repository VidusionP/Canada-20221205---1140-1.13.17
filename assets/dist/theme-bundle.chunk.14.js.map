{"version":3,"sources":["webpack:///./assets/js/theme/category.js"],"names":["Category","loaded","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","showMoreProducts","infiniteScroll","elem","document","querySelector","infScroll","InfiniteScroll","path","append","history","scrollThreshold","onInit","css","addClass","removeClass","text","$productListingContainer","$facetedSearchContainer","productsPerPage","context","categoryProductsPerPage","requestOptions","config","category","shop_by_price","products","limit","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","html","animate","scrollTop","event","preventDefault","nextPage","next","link","find","attr","ajax","type","url","replace","success","data","children","blur","Number","CatalogPage"],"mappings":"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","file":"theme-bundle.chunk.14.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\r\nimport CatalogPage from './catalog';\r\nimport $ from 'jquery';\r\nimport FacetedSearch from './common/faceted-search';\r\n\r\nexport default class Category extends CatalogPage {\r\n    loaded() {\r\n        if ($('#facetedSearch').length > 0) {\r\n            this.initFacetedSearch();\r\n        } else {\r\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\r\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\r\n        }\r\n        this.showMoreProducts();\r\n        this.infiniteScroll();\r\n    }\r\n    infiniteScroll() {\r\n \r\n        const elem = document.querySelector('.productGrid');\r\n        const infScroll = new InfiniteScroll(elem, {\r\n        // options\r\n            path: '.pagination-item--next .pagination-link',\r\n            append: '.product',\r\n            history: false,\r\n            scrollThreshold: 100,\r\n            onInit: function() {\r\n                this.on( 'request', function() {\r\n                    $('.pagination').css('display', 'none')\r\n                    $('#listing-showmoreBtn > a').addClass('loading');\r\n                });\r\n                this.on ( 'last' , function() {\r\n                    $('#listing-showmoreBtn > a').removeClass('loading');\r\n                    $('#listing-showmoreBtn').addClass('pagination-disable button').text('No more products');\r\n\r\n                })\r\n              }\r\n\r\n        });\r\n        return infScroll;\r\n    }\r\n\r\n    initFacetedSearch() {\r\n        const $productListingContainer = $('#product-listing-container');\r\n        const $facetedSearchContainer = $('#faceted-search-container');\r\n        const productsPerPage = this.context.categoryProductsPerPage;\r\n        const requestOptions = {\r\n            config: {\r\n                category: {\r\n                    shop_by_price: true,\r\n                    products: {\r\n                        limit: productsPerPage,\r\n                    },\r\n                },\r\n            },\r\n            template: {\r\n                productListing: 'category/product-listing',\r\n                sidebar: 'category/sidebar',\r\n            },\r\n            showMore: 'category/show-more',\r\n        };\r\n\r\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\r\n            $productListingContainer.html(content.productListing);\r\n            $facetedSearchContainer.html(content.sidebar);\r\n            this.showMoreProducts();\r\n            $('html, body').animate({\r\n                scrollTop: 0,\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    showMoreProducts() {\r\n        const context = this.context;\r\n\r\n        $('.button--showmore').on('click', (event) => {\r\n            event.preventDefault();\r\n            var nextPage = $(\".pagination-item--current\").next(),\r\n                link = nextPage.find(\"a\").attr(\"href\");\r\n            $('#listing-showmoreBtn > a').addClass('loading');\r\n\r\n            $.ajax({\r\n                type: 'get',\r\n                url: link.replace(\"http://\", \"//\"),\r\n                success: function(data) {\r\n                    if ($(data).find('#product-listing-container .productGrid').length > 0) {\r\n                        \r\n                        $('#product-listing-container .productGrid').append($(data).find('#product-listing-container .productGrid').children());\r\n\r\n                        $('.pagination-list').html($(data).find(\".pagination-list\").html());\r\n\r\n                        $('#listing-showmoreBtn > a').removeClass('loading').blur();\r\n\r\n                        if (Number($(data).find('.pagination-info .end').text()) <= Number($(data).find('.pagination-info .total').text())) {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .end').text());\r\n                        } else {\r\n                            $('.pagination .pagination-info .end').text($(data).find('.pagination-info .total').text());\r\n                        }\r\n\r\n                        nextPage = $(\".pagination-item--current\").next();\r\n\r\n                        if (nextPage.length === 0) {\r\n                            $('#listing-showmoreBtn').addClass('pagination-disable button').text('No more products');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/theme/category.js"],"sourceRoot":""}